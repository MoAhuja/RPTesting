export function createFileSystemCache({ fileService, }) {
    const cache = new Map();
    let changes = [];
    return {
        async get(path) {
            for (const change of changes) {
                const path = await fileService.fileURLToRealPath(change.uri);
                cache.delete(path);
            }
            changes = [];
            return cache.get(path);
        },
        set(path, entry) {
            cache.set(path, entry);
        },
        async setData(path, data) {
            const entry = await this.get(path);
            if (entry) {
                entry.data = data;
            }
        },
        notify(changes) {
            changes.push(...changes);
        },
    };
}
//# sourceMappingURL=file-system-cache.js.map